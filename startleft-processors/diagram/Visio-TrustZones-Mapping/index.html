
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://iriusrisk.github.io/startleft/startleft-processors/diagram/Visio-TrustZones-Mapping/" rel="canonical"/>
<link href="../Visio-Mapping/" rel="prev"/>
<link href="../Visio-Representations/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.13" name="generator"/>
<title>Visio TrustZones Mapping - StartLeft</title>
<link href="../../../assets/stylesheets/main.ffa9267a.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#visio-shapes-context">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="StartLeft" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="StartLeft">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            StartLeft
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Visio TrustZones Mapping
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/iriusrisk/startleft" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="StartLeft" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="StartLeft">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    StartLeft
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/iriusrisk/startleft" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Open-Threat-Model-%28OTM%29/">
        Open Threat Model (OTM)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Quickstart-Guide-for-Beginners/">
        Quickstart Guide for Beginners
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../About/">
        About this documentation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Versioning/">
        Versioning
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Usage
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Usage
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/Command-Line-Interface/">
        Command Line Interface (CLI)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/REST-API/">
        REST API
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Guide for Integrations
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Guide for Integrations
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../integration/Quickstart-Guide-for-Integrations/">
        Quickstart Guide for Integrations
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Guide for Developers
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          Guide for Developers
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../development/Quickstart-Guide-for-Developers/">
        Quickstart Guide for Developers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../development/Create-a-new-StartLeft-Processor/">
        Create a new SLP
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../development/Architecture/">
        Architecture
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../development/Errors-Management/">
        Errors management
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../development/Run-Configurations/">
        Run Configurations
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          StartLeft Processors (SLP)
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
          StartLeft Processors (SLP)
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
          Microsoft Threat Modeling Tool (MTMT)
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_1">
<span class="md-nav__icon md-icon"></span>
          Microsoft Threat Modeling Tool (MTMT)
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../external-threat-model/mtmt/MTMT-Quickstart/">
        MTMT Quickstart
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../external-threat-model/mtmt/MTMT-Mapping/">
        MTMT Mapping
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
          CloudFormation Template
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_2">
<span class="md-nav__icon md-icon"></span>
          CloudFormation Template
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/cft/CloudFormation-Quickstart/">
        CloudFormation Quickstart
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/cft/CloudFormation-Mapping/">
        CloudFormation Mapping
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/cft/CloudFormation-Examples/">
        CloudFormation Examples
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
          Terraform
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_3">
<span class="md-nav__icon md-icon"></span>
          Terraform
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-Quickstart/">
        Terraform Quickstart
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_3_2" id="__nav_9_3_2_label" tabindex="0">
          Terraform Mapping
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_3_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_9_3_2">
<span class="md-nav__icon md-icon"></span>
          Terraform Mapping
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-how-to-create-a-basic-mapping-file/">
        How To Create a Basic Mapping File
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-how-mapping-file-works/">
        How Mapping File works
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-how-dataflow-mapping-works/">
        How Dataflow Mapping File works
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-domain-specific-language/">
        Domain-Specific Language
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-additional-jmespath-functions/">
        Additional JMESPath functions
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../iac/tf/Terraform-Examples/">
        Terraform Examples
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
          Visio
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_4">
<span class="md-nav__icon md-icon"></span>
          Visio
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Visio-Quickstart/">
        Visio Quickstart
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Visio-Mapping/">
        Visio Mapping
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Visio TrustZones Mapping
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Visio TrustZones Mapping
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#visio-shapes-context">
    Visio shapes context
  </a>
<nav aria-label="Visio shapes context" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-of-shapely-polygons">
    Use of shapely Polygons
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#trustzone-identification">
    TrustZone identification
  </a>
<nav aria-label="TrustZone identification" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#parent-shape-trustzone">
    Parent Shape TrustZone
  </a>
<nav aria-label="Parent Shape TrustZone" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#nested-components">
    Nested components
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#boundary-trustzone">
    Boundary TrustZone
  </a>
<nav aria-label="Boundary TrustZone" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#supported-types-of-arcs">
    Supported types of arcs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#zones-calculation">
    Zones calculation
  </a>
<nav aria-label="Zones calculation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#zone-component-building-details">
    Zone component building details
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#limitations">
    Limitations
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Visio-Representations/">
        Visio Representations
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Lucidchart-support/">
        Lucidchart Support
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../Troubleshooting/">
        Troubleshooting
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#visio-shapes-context">
    Visio shapes context
  </a>
<nav aria-label="Visio shapes context" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-of-shapely-polygons">
    Use of shapely Polygons
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#trustzone-identification">
    TrustZone identification
  </a>
<nav aria-label="TrustZone identification" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#parent-shape-trustzone">
    Parent Shape TrustZone
  </a>
<nav aria-label="Parent Shape TrustZone" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#nested-components">
    Nested components
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#boundary-trustzone">
    Boundary TrustZone
  </a>
<nav aria-label="Boundary TrustZone" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#supported-types-of-arcs">
    Supported types of arcs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#zones-calculation">
    Zones calculation
  </a>
<nav aria-label="Zones calculation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#zone-component-building-details">
    Zone component building details
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#limitations">
    Limitations
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Visio TrustZones Mapping</h1>
<h2 id="visio-shapes-context">Visio shapes context</h2>
<hr/>
<p>Trustzones in a Visio diagram can be represented in different ways and, in each of them, it does not exist a perfect 
method to unambiguously identify the TrustZone to which a component belongs. This page pretends to clarify the 
different 
mechanisms used by StartLeft to identify TrustZones and assign components to them during the Visio diagram parsing 
to an Open Threat Model (OTM).</p>
<h3 id="use-of-shapely-polygons">Use of shapely Polygons</h3>
<p>Visio diagrams only have two ways to relate shapes:</p>
<ul>
<li><strong>Connectors between shapes</strong>, that are used to create OTM dataflows.</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/shapes-connection.png"><img alt="img/shapes-connection.png" src="../img/shapes-connection.png"/></a></p>
<ul>
<li><strong>Grouped shapes</strong>. This may be useful in some circumstances, but grouping shapes is a decision of the person that is 
 creating the diagram, so we cannot trust on that to perform generic processing.</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/shapes-nesting.png"><img alt="img/shapes-nesting.png" src="../img/shapes-nesting.png"/></a></p>
<p>These two features are not enought for the processings we need to do. Along this document, we will see that we need to 
identify relationships between the shapes (inheritance, zones definition, etc.). For that reason, at the moment of 
loading the Visio diagram, we use the Visio library <code>shapely</code> to create a simplified representation of each shape, so we 
can then perform more or less complex operation with that representation model.</p>
<p>This would be an example of a Visio diagram and the simplified model we generate:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/shapes-representation.png"><img alt="img/shapes-representation.png" src="../img/shapes-representation.png"/></a></p>
<p>The shapely object we use for the Visio shapes representation is the Polygon and an extensive manual of how to manipulate 
those objects can be found <a href="https://shapely.readthedocs.io/en/stable/manual.html">here</a>.</p>
<h2 id="trustzone-identification">TrustZone identification</h2>
<hr/>
<p>We have two ways to identify TrustZones in a Visio diagram that are described below. However, it is important to notice 
that, regardless of the type of TrustZone calculation, <strong>no TrustZone will be included in the OTM if it does not appear in 
the mapping file</strong>. If some TrustZone candidate is identified in the Visio diagram, but it is not in the mapping file, 
the TrustZone will be ignored or processed as a normal component depending on the case.</p>
<h3 id="parent-shape-trustzone">Parent Shape TrustZone</h3>
<p><strong>One shape that has no parent in the Visio diagram and that appears in the mapping file is considered a TrustZone</strong>. 
It is the case of this example:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/parent-shape-trustzone.png"><img alt="img/parent-shape-trustzone.png" src="../img/parent-shape-trustzone.png"/></a></p>
<p>The TrustZone identification is based on the parent calculation. Notice that a component may belong directly to a 
TrustZone, but also be nested into another component. Anyway, each shape must have a parent, so, for each of them, we 
perform the following steps:</p>
<ol>
<li>We check if the shape is contained into another. If so, that shape is its parent.</li>
<li>If a shape is not contained in any other, there are two options:<ol>
<li>If it is mapped as a TrustZone in the mapping file, it is a TrustZone.</li>
<li>If not, it is a component whose parent is the default TrustZone.</li>
</ol>
</li>
</ol>
<p>As stated before, Visio does not provide information about if a shape is over or “belongs to“ another one. To solve this, 
we use the shapely’s <code>Polygon</code> representations of each shape. For each shape, we check if it is contained in another one 
by using the shapely’s <code>Polygon</code>'s function <code>contains(Polygon) -&gt; bool</code>. This function lets us know if some shape contains 
another.</p>
<h4 id="nested-components">Nested components</h4>
<p>Nested components are a special case where more than one shapes will return True when calling the <code>contains</code> function.</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/nested-components.png"><img alt="img/nested-components.png" src="../img/nested-components.png"/></a></p>
<p>In the example above, the <code>Public Cloud</code> and <code>Custom VPC</code> contain the <code>Some ec2</code> shape. In this case we use the <code>Polygon</code>'s 
function area. The parent shape is the one with the smallest area, that is, the <code>Custom VPC</code>. Then, the Custom VPC is only 
contained in the <code>Public Cloud</code>, so it is selected as its parent. Finally, the <code>Public Cloud</code> is not contained by any 
shape, and it is mapped as TrustZone in the mapping file, so it is converted into one.</p>
<h3 id="boundary-trustzone">Boundary TrustZone</h3>
<blockquote>
<p><strong>Note</strong>: The tangent would be more precise than the secant, but given that its center point is more difficult to 
extract from the Visio data, we use the secant, whose calculations should be also valid for other types or arcs, 
like elliptical ones.</p>
</blockquote>
<p>Boundaries are the most common way to delimite TrustZones in a threat model. However, their graphic representation is 
more lax than the nested shapes, because they simply use arcs to define zones in the diagram. For example:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/boundary-trustzones.png"><img alt="img/boundary-trustzones.png" src="../img/boundary-trustzones.png"/></a></p>
<p>In this case, we need to use the arcs that define the boundaries to generate different zones in the diagram  and then 
check the shapes that belong to those zones. Anyway, do not forget that, <strong>if a TrustZone is not in the mapping file, it 
will not be generated. In case of boundary TrustZones, they will simply be ignored</strong>.</p>
<h4 id="supported-types-of-arcs">Supported types of arcs</h4>
<blockquote>
<p><strong>Note</strong>: <u>This is a relevant limitation</u>.</p>
</blockquote>
<p>There are several types of shapes that could be used to determine boundaries in the diagram, and we will need to evolve 
StartLeft to support them. <strong>Currently, we only support the Curved shape Visio type to process TrustZones</strong>.
It may be evolved in the future in order to include more types of connectors.</p>
<h4 id="zones-calculation">Zones calculation</h4>
<p>To build the diagram zones from the arc shapes, we generate internal components based on the intersection of the secant 
of the boundary arcs with the diagram limits:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/zones-calculation.png"><img alt="img/zones-calculation.png" src="../img/zones-calculation.png"/></a></p>
<p><strong>Once we have these special zone components calculated, they are inserted in the usual parent calculation process 
described above</strong>. However, there are two particularities with them:</p>
<ol>
<li>A zone component can only be mapped to a TrustZone. If there is no TrustZone to match it in the mapping file, it is 
simply ignored and not transformed in a normal component.</li>
<li>If two zone components are overlapped and a shape belongs to both, we cannot use here the area criteria to decide 
   because it is not relevant. Instead of it, we use the shapely <code>Polygon</code>'s function centroid,  that returns a <code>Point</code> 
   representing the center of the generated component. Then we also get the center of the child shape and, using the
   <code>Point</code>'s <code>distance</code> function, we choose the zone whose center is closer to the shape’s one.</li>
</ol>
<h5 id="zone-component-building-details"><u>Zone component building details</u></h5>
<blockquote>
<p><strong>TL;DR</strong>: This is a very low level section, feel free to skip it if you want, since the more relevant info about 
TrustZone mappings can be understood without this level of detail.</p>
</blockquote>
<p>To build the zone components, we use three properties of the Visio arc shape (aka. <em>Curved panel</em>):</p>
<ul>
<li><code>Shape/Cell['PinX']</code>: X coordinate of the center of the arc shape.</li>
<li><code>Shape/Cell['PinY']</code>: Y coordinate of the center of the arc shape.</li>
<li><code>Shape/Cell['Angle']</code>: Angle of rotation of the shape.</li>
</ul>
<p>Represented in Visio, these properties would be:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/arc-details.png"><img alt="img/arc-details.png" src="../img/arc-details.png"/></a></p>
<p>Apart from this data, during the main parsing process of the shapes, we keep track of its position in order to calculate 
the borders of the diagrams, that are essential for the calculations described below.</p>
<p><strong><u>Angle normalization</u></strong></p>
<p>The first step of the process is translating the Visio angle from the [-pi, pi] range to (0, 2pi] to simplify further 
calculations using the following expression:
<code>angle = angle + 2*pi if angle &lt; 0</code></p>
<blockquote>
<p><strong>Note</strong>: Notice that Visio angles are given in radians and so that is how they are processed in StartLeft.</p>
</blockquote>
<p>Once we have the angle normalized, there are two possible cases. The first one is when we have a perfectly vertical or 
horizontal secant. In this case, we will build a quadrant component (the <em>Private Secured Cloud</em> on the first example of 
this section). The second case is when the secant is sloped with a certain angle, and we need to calculate the 
intersection using the formula of the line (the other two cases in the example).</p>
<p><strong><u>Quadrant building</u></strong></p>
<p>This is the simplest case. We only have to know the orientation of the arc and then build the quadrant based on 
the X or Y value depending on the case. The correspondences between the four possible orientations and the 
normalized Visio angle are the following:</p>
<ul>
<li><strong>UPPER</strong>: pi / 4 radians</li>
<li><strong>LOWER</strong>:  (5 / 4) * pi radians</li>
<li><strong>LEFT</strong>: (3 / 4) * pi radians</li>
<li><strong>RIGHT</strong>: (7 / 4) * pi radians</li>
</ul>
<p>For each of these orientations, we have a function to determine the points of the <code>Polygon</code> we have to build:</p>
<ul>
<li><strong>UPPER</strong>: <code>[(x_floor, y), (x_floor, y_top), (x_top, y_top), (x_top, y)]</code> </li>
<li><strong>LOWER</strong>: <code>[(x_floor, y_floor), (x_floor, y), (x_top, y), (x_top, y_floor)])</code> </li>
<li><strong>LEFT</strong>: <code>[(x_floor, y_floor), (x_floor, y_top), (x, y_top), (x, y_floor)])</code> </li>
<li><strong>RIGHT</strong>: <code>[(x, y_floor), (x, y_top), (x_top, y_top), (x_top, y_floor)])</code> </li>
</ul>
<p><strong><u>Irregular zone building</u></strong></p>
<p>In this case we have to calculate the formula of the secant line in order to calculate the point of intersection 
with the borders of the diagram. For that, the first step is getting the line angle. Notice that it is different from 
the Visio shape angle. For example, in the previous arc figure, the shape angle is pi/4 radians and the secant 
angle is 0 radians. To get the real angle, we need to perform the following calculation:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">def</span> <span class="nf">calc_slope_angle</span><span class="p">(</span><span class="n">angle</span><span class="p">):</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="n">slope_angle</span> <span class="o">=</span> <span class="n">angle</span> <span class="o">-</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="k">if</span> <span class="n">slope_angle</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="n">slope_angle</span> <span class="o">=</span> <span class="n">slope_angle</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="k">if</span> <span class="n">slope_angle</span> <span class="o">&gt;</span> <span class="n">pi</span><span class="p">:</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>        <span class="n">slope_angle</span> <span class="o">=</span> <span class="n">slope_angle</span> <span class="o">-</span> <span class="n">pi</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="k">return</span> <span class="n">slope_angle</span>
</code></pre></div>
<p>Then, we calculate the slope with the tangent: <code>slope = tan(slope_angle)</code></p>
<p>Once we have the slope and some point (the <code>PinX</code>, <code>PinY</code> coordinates), we can already calculate the formulas for 
getting the Y value from the X and viceversa.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">def</span> <span class="nf">calc_y_formula</span><span class="p">(</span><span class="n">slope</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">any_line_point</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">):</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>    <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">slope</span> <span class="o">-</span> <span class="n">any_line_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">slope</span> <span class="o">+</span> <span class="n">any_line_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="k">def</span> <span class="nf">calc_x_formula</span><span class="p">(</span><span class="n">slope</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">any_line_point</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">):</span>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>    <span class="k">return</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span> <span class="o">/</span> <span class="n">slope</span> <span class="o">+</span> <span class="n">any_line_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">any_line_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">slope</span><span class="p">)</span>
</code></pre></div>
<p>From this point on, the process is similar to the quadrant. In the first place, we need to determine the orientation of the arc:</p>
<ul>
<li><strong>UPPER_LEFT</strong>: <code>pi / 4 &lt;= angle &lt;= (3 / 4) * pi</code> </li>
<li><strong>UPPER_RIGHT</strong>: <code>0 &lt;= angle &lt;= pi / 4 or (7 / 4) * pi &lt;= angle &lt;= 2 * pi</code> </li>
<li><strong>LOWER_LEFT</strong>: <code>(3 / 4) * pi &lt;= angle &lt;= (5 / 4) * pi</code> </li>
<li><strong>LOWER_RIGHT</strong>: <code>(5 / 4) * pi &lt;= angle &lt;= (7 / 4) * pi</code></li>
</ul>
<p>With the orientation and the x and y formulas, we already have all the necessary to build the <code>Polygon</code> from the 
intersection of the line with the diagram borders. In this case, the functions are a little more complex because, 
depending on how big the diagram is and what is the angle of the arc, the zone can be a triangle or a quadrilateral.
To keep this document simpler, the functions are omitted, but they can be checked out in the <code>slp_visio</code>’s 
<code>irregular_zones.py</code> file.</p>
<h2 id="limitations">Limitations</h2>
<hr/>
<p>Currently, there are a couple of significant limitations to take into account regarding the trustzone identification:</p>
<ul>
<li>In boundary TrustZones, if a shape is located between the secant and the arc itself, it is not considered part of 
the TrustZone.</li>
<li>We only support Visio’s Curved Panel to process boundary TrustZones.</li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="github" type="checkbox"/>
<span class="task-list-indicator"></span>
          GitHub
        </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "search.suggest", "search.highlight", "content.code.annotate", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>